# catalog.yaml - Download Source Definitions
#
# Parameterized Variables:
# Sources can use {{os}} and {{arch}} placeholders in their params.
#
# Available Variables:
#   {{os}}            - "linux", "macos", "windows"
#   {{arch}}          - "amd64", "arm64"
#   {{ext}}           - Generic extension: "zip", "dmg", "exe" (configurable via ext_map)
#   {{os_map}}        - Mapped OS value from os_map
#   {{arch_map}}      - Mapped Arch value from arch_map
#
sources:
  # --- Games ---
  - id: "melonds"
    name: "melonDS"
    strategy: "github_release"
    params:
      repo: "melonDS-emu/melonDS"
      # melonDS-1.1-appimage-x86_64.zip
      # melonDS-1.1-win-x64.zip
      # melonDS-1.1-macOS-universal.zip
      force_os_display: "true"
      asset_pattern: "melonDS-.*-{{os_map}}-{{arch_map}}.*"
    os_map:
      linux: "appimage"
      windows: "windows"
      macos: "macOS"
    arch_map:
      linux/amd64: "x86_64"
      linux/arm64: "aarch64"
      windows/amd64: "x86_64"
      windows/arm64: "aarch64"
      macos/amd64: "universal"
      macos/arm64: "universal"
    ext_map:
      macos: "zip"

  - id: "mgba"
    name: "mGBA"
    strategy: "github_release"
    params:
      repo: "mgba-emu/mgba"
      # mGBA-0.10.3-macos.dmg
      # mGBA-0.10.3-appimage-x64.appimage
      # mGBA-0.10.3-win64.7z
      asset_pattern: "mGBA-.*-{{os_map}}{{arch_map}}.*"
    os_map:
      linux: "appimage"
      windows: "win64"
      macos: "macos"
    arch_map:
      linux/amd64: "-x64-qt" # "-qt" suffix often present in recent AppImages? verifying against original "x64" logic
      linux/arm64: "-aarch64-qt"
      # Windows uses 'win64' which is covered by os_map name, arch part is empty in original logic
      windows/amd64: ""
      windows/arm64: ""
      macos/amd64: ""
      macos/arm64: ""
    ext_map:
      linux: "appimage"
      windows: "7z"
      macos: "dmg"
    exclude: ["windows/arm64"]

  # --- Media ---
  - id: "vlc"
    name: "VLC Media Player"
    strategy: "web_scrape"
    params:
      base_url: "https://get.videolan.org/vlc/"
      version_pattern: '(\d+\.\d+\.\d+)/'
      # Construct: 3.0.21/macosx/vlc-3.0.21-intel64.dmg
      # Construct: 3.0.21/win64/vlc-3.0.21-win64.exe
      file_template: "{{version}}/{{os_map}}/vlc-{{version}}-{{arch_map}}.{{ext}}"
      force_os_display: "true"
    os_map:
      macos: "macosx"
      windows: "win64"
    arch_map:
      macos/amd64: "intel64"
      macos/arm64: "arm64" # recent VLC has universal or silicon? verifying "intel64" logic was specific
      windows/amd64: "win64"
      windows/arm64: "win-arm64"
    ext_map:
      windows: "exe"
      macos: "dmg"
    exclude: ["linux", "windows/arm64"] # Linux VLC is usually via package manager

  - id: "jellyfin-player"
    name: "Jellyfin Media Player"
    strategy: "github_release"
    params:
      repo: "jellyfin/jellyfin-media-player"
      # JellyfinMediaPlayer-1.12.0-AppleSilicon.dmg
      # JellyfinMediaPlayer-1.12.0-Intel.dmg
      # JellyfinMediaPlayer-1.12.0-windows-x64.exe
      asset_pattern: "JellyfinMediaPlayer-.*-{{arch_map}}\\.{{ext}}"
      force_os_display: "true"
    arch_map:
      macos/amd64: "Intel"
      macos/arm64: "AppleSilicon"
      windows/amd64: "windows-x64"
    ext_map:
      windows: "exe"
      macos: "dmg"
    exclude: ["linux", "windows/arm64"]
