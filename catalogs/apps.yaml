sources:
  - id: "balena-etcher"
    name: "BalenaEtcher"
    strategy: "github_release"
    params:
      repo: "balena-io/etcher"
      # New v2.x format: balenaEtcher-2.1.4-arm64.dmg (macOS)
      # Linux: balenaEtcher-linux-x64-2.1.4.zip
      asset_pattern: "balenaEtcher-.*{{os_balena}}{{arch_balena}}.*\\.{{ext_balena}}"
    exclude: ["linux/arm64", "windows/arm64"]

  - id: "kiwix-desktop"
    name: "Kiwix Desktop"
    strategy: "rss_feed"
    params:
      feed_url: "https://download.kiwix.org/release/kiwix-desktop/feed.xml"
      item_pattern: "kiwix-desktop_{{os_kiwix}}{{arch_kiwix}}_.*\\.{{ext_kiwix}}"
      version_pattern: "(\\d+\\.\\d+\\.\\d+)"
      force_os_display: "true"
    exclude: ["macos", "arm64", "linux/arm64"]

  - id: "kiwix-macos"
    name: "Kiwix Desktop" # Same name to group logically if sorted, or distinct
    strategy: "rss_feed"
    params:
      feed_url: "https://download.kiwix.org/release/kiwix-macos/feed.xml"
      item_pattern: "kiwix-macos_.*\\.dmg"
      version_pattern: "(\\d+\\.\\d+\\.\\d+)"
      force_os_display: "true"
      arch_override: "universal"
    exclude: ["linux", "amd64", "windows"]

  - id: "chromium"
    name: "Chromium"
    strategy: "chromium_gcs"
    params:
      prefix: "{{chromium_platform}}"
      filename: "chrome-{{chromium_file}}.zip"
    exclude: ["linux/arm64", "windows/arm64"] # Arm64 Linux snapshots often use different naming or aren't consistently available in main bucket under same structure without check

  - id: "firefox"
    name: "Mozilla Firefox"
    strategy: "http_redirect"
    params:
      url: "https://download.mozilla.org/?product=firefox-latest-ssl&os={{os_mozilla}}&lang=en-US"
      version_pattern: "releases/(\\d+\\.\\d+(?:\\.\\d+)*)"
    # exclude: ["arm64"] - removed as we now support win-aarch64/linux64-aarch64 via config.go
